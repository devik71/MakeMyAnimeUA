# üé¨ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å—É–±—Ç–∏—Ç—Ä—ñ–≤

–ü—Ä–æ–≥—Ä–∞–º–∞ MAGI —Ç–µ–ø–µ—Ä –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Ñ–∞–π–ª—ñ–≤ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤, —è–∫—ñ –Ω–µ –≤–±—É–¥–æ–≤–∞–Ω—ñ —É –≤—ñ–¥–µ–æ—Ñ–∞–π–ª.

## üîç –Ø–∫ –ø—Ä–∞—Ü—é—î –ø–æ—à—É–∫

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫
–ü—Ä–æ–≥—Ä–∞–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —à—É–∫–∞—î —Ñ–∞–π–ª–∏ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ —É –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö:

1. **–û—Å–Ω–æ–≤–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è** (`input/`) - –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤—ñ–¥–µ–æ—Ñ–∞–π–ª
2. **–ü—ñ–¥–ø–∞–ø–∫–∏ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤**:
   - `input/Subs/`
   - `input/Subtitles/`
   - `input/Sub/`
   - `input/subs/`
   - `input/subtitles/`
   - `input/sub/`
3. **–î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—É** (—è–∫—â–æ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ `input/`)

### –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏
- **SRT** (`.srt`) - –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏–π —Ñ–æ—Ä–º–∞—Ç
- **ASS/SSA** (`.ass`, `.ssa`) - Advanced SubStation Alpha
- **VTT** (`.vtt`) - WebVTT –¥–ª—è –≤–µ–±-–≤—ñ–¥–µ–æ
- **SUB** (`.sub`) - MicroDVD —Ç–∞ —ñ–Ω—à—ñ
- **SBV** (`.sbv`) - YouTube SubViewer

## üß† –†–æ–∑—É–º–Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—à—É–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ
–ü—Ä–æ–≥—Ä–∞–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä–æ–∑—É–º–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫—ñ —Å—É–±—Ç–∏—Ç—Ä–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—É:

1. **–¢–æ—á–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å** –Ω–∞–∑–≤ (—Ä–µ–π—Ç–∏–Ω–≥ 100%)
2. **–ß–∞—Å—Ç–∫–æ–≤–µ –≤–∫–ª—é—á–µ–Ω–Ω—è** –Ω–∞–∑–≤ (—Ä–µ–π—Ç–∏–Ω–≥ 85-90%)
3. **–°—Ö–æ–∂—ñ—Å—Ç—å –∑–∞ —Å–ª–æ–≤–∞–º–∏** (—Ä–µ–π—Ç–∏–Ω–≥ –¥–æ 80%)

### –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è

**–í—ñ–¥–µ–æ—Ñ–∞–π–ª:** `The.Movie.2023.1080p.BluRay.x264.mkv`

**–ë—É–¥–µ –∑–Ω–∞–π–¥–µ–Ω–æ:**
- ‚úÖ `The.Movie.2023.uk.srt` (—Ä–µ–π—Ç–∏–Ω–≥: 90%)
- ‚úÖ `The.Movie.2023.1080p.BluRay.x264.srt` (—Ä–µ–π—Ç–∏–Ω–≥: 100%)
- ‚úÖ `The_Movie_Ukrainian.ass` (—Ä–µ–π—Ç–∏–Ω–≥: 75%)
- ‚úÖ `Movie.2023.srt` (—Ä–µ–π—Ç–∏–Ω–≥: 70%)

**–ù–ï –±—É–¥–µ –∑–Ω–∞–π–¥–µ–Ω–æ:**
- ‚ùå `Different.Film.srt` (—Ä–µ–π—Ç–∏–Ω–≥: <60%)
- ‚ùå `Random.Video.vtt` (—Ä–µ–π—Ç–∏–Ω–≥: <60%)

## üåç –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –º–æ–≤–∏

–ü—Ä–æ–≥—Ä–∞–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –º–æ–≤—É —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ –∑–∞ –Ω–∞–∑–≤–æ—é —Ñ–∞–π–ª—É:

### –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –º–æ–≤–∏
- **–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞**: `ua`, `uk`, `ukr`, `ukrainian`
- **–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞**: `en`, `eng`, `english` 
- **–†–æ—Å—ñ–π—Å—å–∫–∞**: `ru`, `rus`, `russian`
- **–§—Ä–∞–Ω—Ü—É–∑—å–∫–∞**: `fr`, `french`
- **–ù—ñ–º–µ—Ü—å–∫–∞**: `de`, `german`
- **–Ü—Å–ø–∞–Ω—Å—å–∫–∞**: `es`, `spanish`
- **–Ü—Ç–∞–ª—ñ–π—Å—å–∫–∞**: `it`, `italian`
- **–ü–æ–ª—å—Å—å–∫–∞**: `pl`, `polish`
- **–ß–µ—Å—å–∫–∞**: `cz`, `czech`
- **–°–ª–æ–≤–∞—Ü—å–∫–∞**: `sk`, `slovak`

### –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–≤–∏
```
movie.ua.srt          ‚Üí ukrainian
film.english.ass      ‚Üí english  
series.en.vtt        ‚Üí english
document_uk.srt      ‚Üí ukrainian
video-rus.sub        ‚Üí russian
```

## üìã –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª—ñ–≤
–ü–æ–º—ñ—Å—Ç—ñ—Ç—å –≤—ñ–¥–µ–æ—Ñ–∞–π–ª —Ç–∞ —Å—É–±—Ç–∏—Ç—Ä–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `input/`:

```
input/
‚îú‚îÄ‚îÄ Movie.2023.1080p.mkv
‚îú‚îÄ‚îÄ Movie.2023.uk.srt          # –£–∫—Ä–∞—ó–Ω—Å—å–∫—ñ —Å—É–±—Ç–∏—Ç—Ä–∏
‚îú‚îÄ‚îÄ Movie.2023.en.srt          # –ê–Ω–≥–ª—ñ–π—Å—å–∫—ñ —Å—É–±—Ç–∏—Ç—Ä–∏
‚îî‚îÄ‚îÄ Subs/
    ‚îî‚îÄ‚îÄ Movie.2023.fr.vtt      # –§—Ä–∞–Ω—Ü—É–∑—å–∫—ñ —É –ø—ñ–¥–ø–∞–ø—Ü—ñ
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–∏
```bash
python scripts/run_pipeline.py
```

### 3. –í–∏–±—ñ—Ä —Å—É–±—Ç–∏—Ç—Ä—ñ–≤
–ü—Ä–æ–≥—Ä–∞–º–∞ –ø–æ–∫–∞–∂–µ –∑–Ω–∞–π–¥–µ–Ω—ñ –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å—É–±—Ç–∏—Ç—Ä–∏:

```
üîç –ü–æ—à—É–∫ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å—É–±—Ç–∏—Ç—Ä—ñ–≤...
‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ 3 –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Ñ–∞–π–ª—ñ–≤ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤:
  [0] Movie.2023.uk.srt (–º–æ–≤–∞: ukrainian, —Ñ–æ—Ä–º–∞—Ç: srt, —Ä–µ–π—Ç–∏–Ω–≥: 90.0)
      –ü—Ä–µ–≤ º—é: –ü—Ä–∏–≤—ñ—Ç, —è–∫ —Å–ø—Ä–∞–≤–∏? | –î–æ–±—Ä–µ, –¥—è–∫—É—é.

  [1] Movie.2023.en.srt (–º–æ–≤–∞: english, —Ñ–æ—Ä–º–∞—Ç: srt, —Ä–µ–π—Ç–∏–Ω–≥: 90.0)
      –ü—Ä–µ–≤ º—é: Hello, how are you? | Good, thank you.

  [2] Movie.2023.fr.vtt (–º–æ–≤–∞: french, —Ñ–æ—Ä–º–∞—Ç: vtt, —Ä–µ–π—Ç–∏–Ω–≥: 85.0)
      –ü—Ä–µ–≤ º—é: Bonjour, comment allez-vous? | Bien, merci.

–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å—É–±—Ç–∏—Ç—Ä–∏? (y/n, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º y): y
–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ñ–∞–π–ª—É —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ (0-2): 0
‚úÖ –í–∏–±—Ä–∞–Ω–æ –∑–æ–≤–Ω—ñ—à–Ω—ñ —Å—É–±—Ç–∏—Ç—Ä–∏: Movie.2023.uk.srt
```

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–±—ñ—Ä
–Ø–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω–æ —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ñ–∞–π–ª —Å—É–±—Ç–∏—Ç—Ä—ñ–≤, –≤—ñ–Ω –±—É–¥–µ –≤–∏–±—Ä–∞–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

## üîÑ –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∏ –ø–æ—à—É–∫—É

1. **–ó–æ–≤–Ω—ñ—à–Ω—ñ —Å—É–±—Ç–∏—Ç—Ä–∏** (—è–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω—ñ —Ç–∞ –≤–∏–±—Ä–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º)
2. **–í–±—É–¥–æ–≤–∞–Ω—ñ —Å—É–±—Ç–∏—Ç—Ä–∏** —É –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—ñ
3. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü—ñ—è –∞—É–¥—ñ–æ** (—è–∫—â–æ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ –Ω–µ–º–∞—î)

## üìù –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —Ñ–æ—Ä–º–∞—Ç—ñ–≤

–ü—Ä–æ–≥—Ä–∞–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—î –≤—Å—ñ —Ñ–æ—Ä–º–∞—Ç–∏ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ —É –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π JSON —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –æ–±—Ä–æ–±–∫–∏:

- **SRT ‚Üí JSON**: –ü–∞—Ä—Å–∏–Ω–≥ —Ç–∞–π–º-–∫–æ–¥—ñ–≤ —Ç–∞ —Ç–µ–∫—Å—Ç—É
- **VTT ‚Üí JSON**: –û–±—Ä–æ–±–∫–∞ WebVTT —Ç–µ–≥—ñ–≤  
- **ASS ‚Üí JSON**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ—Å–Ω—É—é—á–æ–≥–æ ASS –ø–∞—Ä—Å–µ—Ä–∞
- **–Ü–Ω—à—ñ ‚Üí JSON**: –ë–∞–∑–æ–≤–∏–π –ø–∞—Ä—Å–∏–Ω–≥

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç:

```bash
# –ë–∞–∑–æ–≤—ñ —Ç–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–π
python test_external_subs.py

# –¢–µ—Å—Ç –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—é –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é
python test_external_subs.py /path/to/video/directory
```

–¢–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å:
- ‚úÖ –û—á–∏—â–µ–Ω–Ω—è –Ω–∞–∑–≤ —Ñ–∞–π–ª—ñ–≤
- ‚úÖ –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –º–æ–≤–∏ –∑ –Ω–∞–∑–≤
- ‚úÖ –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ä–µ–π—Ç–∏–Ω–≥—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ
- ‚úÖ –ü–æ—à—É–∫ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è—Ö

## üöÄ –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### –ü–ª–∞–Ω—É—î—Ç—å—Å—è –¥–æ–¥–∞—Ç–∏:
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –±—ñ–ª—å—à–µ —Ñ–æ—Ä–º–∞—Ç—ñ–≤ (`.idx/.sub`, `.txt`)
- –ü–æ—à—É–∫ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ –≤ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç—ñ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ OpenSubtitles
- –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∫–æ–¥—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –±–∞–≥–∞—Ç–æ–¥–æ—Ä—ñ–∂–∫–æ–≤–∏—Ö —Å—É–±—Ç–∏—Ç—Ä—ñ–≤

### –ü–æ—Ç–æ—á–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è:
- –ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ UTF-8, CP1251, Latin1 –∫–æ–¥—É–≤–∞–Ω–Ω—è
- –ü–æ—à—É–∫ —Ç—ñ–ª—å–∫–∏ –≤ –ª–æ–∫–∞–ª—å–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è—Ö
- –û–¥–∏–Ω —Ñ–∞–π–ª —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ –∑–∞ —Ä–∞–∑

## üÜò –ü—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –°—É–±—Ç–∏—Ç—Ä–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω—ñ
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É —Å—É–±—Ç–∏—Ç—Ä—ñ–≤
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ñ–æ—Ä–º–∞—Ç –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è
3. –ü–æ–º—ñ—Å—Ç—ñ—Ç—å —Å—É–±—Ç–∏—Ç—Ä–∏ –≤ `input/` –∞–±–æ –ø—ñ–¥–ø–∞–ø–∫—É `Subs/`

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ –∫–æ–¥—É–≤–∞–Ω–Ω—è
```
UnicodeDecodeError: 'utf-8' codec can't decode
```
**–†—ñ—à–µ–Ω–Ω—è**: –ü—Ä–æ–≥—Ä–∞–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–ø—Ä–æ–±—É—î —ñ–Ω—à—ñ –∫–æ–¥—É–≤–∞–Ω–Ω—è (CP1251, Latin1)

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –º–æ–≤–∞
–î–æ–¥–∞–π—Ç–µ –∫–æ–¥ –º–æ–≤–∏ –≤ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É:
```
movie.srt           ‚Üí movie.uk.srt
series.ass          ‚Üí series.en.ass
```

---

**üí° –ü—ñ–¥–∫–∞–∑–∫–∞**: –î–ª—è –Ω–∞–π–∫—Ä–∞—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –Ω–∞–∑–∏–≤–∞–π—Ç–µ —Ñ–∞–π–ª–∏ —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å—Ö–æ–∂–µ –¥–æ –Ω–∞–∑–≤–∏ –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—É —Ç–∞ –¥–æ–¥–∞–≤–∞–π—Ç–µ –∫–æ–¥ –º–æ–≤–∏.